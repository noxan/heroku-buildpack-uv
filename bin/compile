#!/bin/sh

indent() {
  sed -u 's/^/       /'
}

echo "-----> Found a pyproject.toml"

# if pyproject.toml is empty, abort the build
if [ ! -s $1/pyproject.toml ]; then
  echo "pyproject.toml was empty" | indent
  exit 1
fi

# install astral uv
curl -LsSf https://astral.sh/uv/install.sh | sh
source $HOME/.local/bin/env

# setup python
uv python install

# install dependencies
uv sync
